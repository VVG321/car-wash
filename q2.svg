<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="441px" preserveAspectRatio="none" style="width:1284px;height:441px;background:#FFFFFF;" version="1.1" viewBox="0 0 1284 441" width="1284px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="320.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="232.5" y="67.4297"/><rect fill="#FFFFFF" height="262.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="419.5" y="96.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="666.5" y="125.6953"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="839.5" y="183.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1052.5" y="213.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1192" y="271.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="36.2969" y2="405.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="237" x2="237" y1="36.2969" y2="405.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="424" x2="424" y1="36.2969" y2="405.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="671.5" x2="671.5" y1="36.2969" y2="405.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="844.5" x2="844.5" y1="36.2969" y2="405.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1057" x2="1057" y1="36.2969" y2="405.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1197" x2="1197" y1="36.2969" y2="405.8906"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="12" y="24.9951">Клиент</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="5" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="12" y="424.8857">Клиент</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="197" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="204" y="24.9951">Веб-сайт</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="197" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="204" y="424.8857">Веб-сайт</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="35" x="407" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="414" y="24.9951">API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="35" x="407" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="414" y="424.8857">API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="572.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="579.5" y="24.9951">Сервис Аутентификации</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="572.5" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="579.5" y="424.8857">Сервис Аутентификации</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="780.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="787.5" y="24.9951">Сервис Оплаты</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="780.5" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="787.5" y="424.8857">Сервис Оплаты</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="1009" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1016" y="24.9951">БД Оплаты</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="1009" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1016" y="424.8857">БД Оплаты</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="1116" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1123" y="24.9951">Платежная система</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="1116" y="404.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1123" y="424.8857">Платежная система</text><rect fill="#FFFFFF" height="320.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="232.5" y="67.4297"/><rect fill="#FFFFFF" height="262.1953" style="stroke:#181818;stroke-width:1.0;" width="10" x="419.5" y="96.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="666.5" y="125.6953"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="839.5" y="183.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1052.5" y="213.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1192" y="271.3594"/><polygon fill="#181818" points="220.5,63.4297,230.5,67.4297,220.5,71.4297,224.5,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="39.5" x2="226.5" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="46.5" y="62.3638">Начинает оплату</text><polygon fill="#181818" points="407.5,92.5625,417.5,96.5625,407.5,100.5625,411.5,96.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="242.5" x2="413.5" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="249.5" y="91.4966">POST /payments</text><polygon fill="#181818" points="654.5,121.6953,664.5,125.6953,654.5,129.6953,658.5,125.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="429.5" x2="660.5" y1="125.6953" y2="125.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="436.5" y="120.6294">Аутентификация пользователя</text><polygon fill="#181818" points="440.5,150.8281,430.5,154.8281,440.5,158.8281,436.5,154.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="434.5" x2="670.5" y1="154.8281" y2="154.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="446.5" y="149.7622">OK, авторизован</text><polygon fill="#181818" points="827.5,179.9609,837.5,183.9609,827.5,187.9609,831.5,183.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="429.5" x2="833.5" y1="183.9609" y2="183.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227" x="436.5" y="178.895">POST /payments (данные оплаты)</text><polygon fill="#181818" points="1040.5,209.0938,1050.5,213.0938,1040.5,217.0938,1044.5,213.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="849.5" x2="1046.5" y1="213.0938" y2="213.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="856.5" y="208.0278">Сохранить данные оплаты</text><polygon fill="#181818" points="860.5,238.2266,850.5,242.2266,860.5,246.2266,856.5,242.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="854.5" x2="1056.5" y1="242.2266" y2="242.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="866.5" y="237.1606">Данные сохранены</text><polygon fill="#181818" points="1180,267.3594,1190,271.3594,1180,275.3594,1184,271.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="849.5" x2="1186" y1="271.3594" y2="271.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="856.5" y="266.2935">Запрос на оплату</text><polygon fill="#181818" points="860.5,296.4922,850.5,300.4922,860.5,304.4922,856.5,300.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="854.5" x2="1196" y1="300.4922" y2="300.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="866.5" y="295.4263">Оплата успешна/не успешна</text><polygon fill="#181818" points="440.5,325.625,430.5,329.625,440.5,333.625,436.5,329.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="434.5" x2="843.5" y1="329.625" y2="329.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="446.5" y="324.5591">OK, оплата выполнена</text><polygon fill="#181818" points="253.5,354.7578,243.5,358.7578,253.5,362.7578,249.5,358.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="247.5" x2="423.5" y1="358.7578" y2="358.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="259.5" y="353.6919">OK, оплата выполнена</text><polygon fill="#181818" points="50.5,383.8906,40.5,387.8906,50.5,391.8906,46.5,387.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="44.5" x2="236.5" y1="387.8906" y2="387.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="56.5" y="382.8247">Подтверждение оплаты</text><!--MD5=[956acacf1bb85a80c17d9d30adf7bd07]
@startuml
participant "Клиент" as User
participant "Веб-сайт" as WebApp
participant "API" as APIGateway
participant "Сервис Аутентификации" as AuthService
participant "Сервис Оплаты" as PaymentService
participant "БД Оплаты" as PaymentDB
participant "Платежная система" as PaymentSystem

User -> WebApp : Начинает оплату
activate WebApp
WebApp -> APIGateway : POST /payments
activate APIGateway
APIGateway -> AuthService : Аутентификация пользователя
activate AuthService
AuthService - -> APIGateway : OK, авторизован
deactivate AuthService
APIGateway -> PaymentService : POST /payments (данные оплаты)
activate PaymentService
PaymentService -> PaymentDB : Сохранить данные оплаты
activate PaymentDB
PaymentDB - -> PaymentService : Данные сохранены
deactivate PaymentDB
PaymentService -> PaymentSystem : Запрос на оплату
activate PaymentSystem
PaymentSystem - -> PaymentService : Оплата успешна/не успешна
deactivate PaymentSystem
PaymentService - -> APIGateway : OK, оплата выполнена
deactivate PaymentService
APIGateway - -> WebApp : OK, оплата выполнена
deactivate APIGateway
WebApp - -> User : Подтверждение оплаты
deactivate WebApp
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>